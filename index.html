<!DOCTYPE html>

<!-- The formating of the html is flat because I'm using a Markdown editor and it just works better this way -->

<html lang=en>
<link rel='icon' href='icons8-spiral-bound-booklet-64.png' type='image/x-icon'/ >
<title>PiKubed Docs</title>
<body>
<xmp theme="united" style="display:none;">

# PiKubed Docs

## What is this?

This is just a simple place holder site that I can quickly update using Markdown thanks to [strapdownjs](http://strapdownjs.com). I'll use this to quickly make notes about my PiKubed project where I plan to use Raspberry Pi 4s to create a Kubernetes cluster for learning purposes. Later I plan to replace this simple site with a more appropriate blog style site probably using something along the lines of WordPress.

## The plan

I have ditched most of my original plans as I have read up and learned about different technologies. I now want to make a Kubernetes cluter using 4 Raspberry Pi 4s, K3s using [k3sup](http://k3sup.dev), with [Rook CEPH](https://rook.io/) storage. K3s is a lightweight, compliant version of Kubernetes that doesn't rely on Docker and instead uses the containerd daemon directly. Rook is a Kubernetes native way of handling stateful storage. The Rook CEPH implementation has been released as stable and is what Red Hat OpenShift Container Platform uses for its stateful storage in version 4+.

## Current status

- Installed the latest version of [Raspbian Buster Lite](https://www.raspberrypi.org/downloads/raspbian/)

- Created DHCP reservations for each Pi (can alternatively use static IPs outside of your DHCP range)

- Performed `sudo apt update && sudo apt upgrade` to make sure packages are at latest version

- Updated passwords, changed hostnames, set GPU memory split to 16mb, changed timezones

- Added a user for Ansible `sudo adduser ansible && sudo usermod -aG sudo ansible`, this creates the ansible user and adds it to the sudo group

- Distributed ssh keys to both pi and ansible users
  
  ```bash
  ssh-copy-id pi@pikubed0
  ssh-copy-id -i ~/.ssh/ansible ansible@pikubed0
  ```

- Added the Pis to my `/etc/ansible/inventory`
  
  ```yaml
  [pikubed_cluster]
  pikubed0
  pikubed1
  pikubed2
  pikubed3
  ```

- And tested connectivity with `ansible pikubed_cluster -m ping`

- Started creating ansible playbooks

- Created ansible role to install and configure log2ram

- Created configure.yml ansible playbook
  
  - Updates packages to latest
  
  - Moves /tmp to tmpfs
  
  - Installs log2ram

- Created reboot.yml playbook that reboots each node in the cluster in series

## Todo

- Install K3s using k3sup

- Install rook-ceph

- Install some way to proxy traffic to the cluster
  
  - Need more research on this topic

- Test deployments (move this site to be hosted on the cluster)


</xmp>
<script src="/v/0.2/strapdown.js"></script>
</body>

</html>
